<!DOCTYPE html>
<html lang="{{ .Site.Language }}">

<head>
    {{ partial "head.html" . }}
</head>

<body class="section-{{ lower .Section }}">

    <div class="container">
        {{ partial "header.html" . }}
        <!--{{ partial "side-menu-LR.html" . }}-->

        <div class="content">
            <main class="main-content">
                <!-- AI Tools Interface Layout. Shows you the MD Page Data -->
                {{ .Content }}

                <!-- Navigation to Previous/Next AI Tools -->
                <nav class="post-navigation">
                    {{ with .NextInSection }}
                    <a href="{{ .Permalink }}" class="nav-link prev">
                        <span class="nav-label">← Previous</span>
                        <span class="nav-title">{{ .Title }}</span>
                    </a>
                    {{ end }}

                    {{ with .PrevInSection }}
                    <a href="{{ .Permalink }}" class="nav-link next">
                        <span class="nav-label">Next →</span>
                        <span class="nav-title">{{ .Title }}</span>
                    </a>
                    {{ end }}
                </nav>

                {{ if .Params.pageScript }}
                <script src="{{ .Site.BaseURL }}{{ .Params.pageScript }}"></script>
                {{ end }}
            </main>
        </div>
    </div>

    {{ partial "javascript.html" . }}

    <!-- Sets the Content Design and Shape for the AI Tools Layout -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Reorganize content into side-by-side layout
            const mainContent = document.querySelector('.main-content');
            if (!mainContent) return;

            // Find form and result elements
            const form = mainContent.querySelector('form');
            const loadingDiv = document.getElementById('loadingDiv');
            const errorDiv = document.getElementById('errorDiv');
            const resultDiv = document.getElementById('resultDiv');
            const navigation = mainContent.querySelector('.post-navigation');

            // Only proceed if we have a form
            if (!form) return;

            // Create wrapper structure
            const wrapper = document.createElement('div');
            wrapper.className = 'ai-tools-layout';

            const formSection = document.createElement('div');
            formSection.className = 'ai-form-section';

            const divider = document.createElement('div');
            divider.className = 'layout-divider';
            divider.title = 'Drag to resize';

            const resultsSection = document.createElement('div');
            resultsSection.className = 'ai-results-section';

            // Get all content before the form
            const elementsBeforeForm = [];
            let currentElement = mainContent.firstElementChild;
            while (currentElement && currentElement !== form) {
                elementsBeforeForm.push(currentElement);
                currentElement = currentElement.nextElementSibling;
            }

            // Move header content (h1, p, etc.) before the form to form section
            elementsBeforeForm.forEach(el => {
                formSection.appendChild(el);
            });

            // Move form to form section
            if (form) {
                formSection.appendChild(form);
            }

            // Move result-related divs to results section
            if (loadingDiv) resultsSection.appendChild(loadingDiv);
            if (errorDiv) resultsSection.appendChild(errorDiv);
            if (resultDiv) resultsSection.appendChild(resultDiv);

            // Append sections to wrapper
            wrapper.appendChild(formSection);
            wrapper.appendChild(divider);
            wrapper.appendChild(resultsSection);

            // Clear main content and append wrapper
            mainContent.innerHTML = '';
            mainContent.appendChild(wrapper);

            // Add navigation back if it exists
            if (navigation) {
                mainContent.appendChild(navigation);
            }

            // Add resize functionality for larger screens
            if (window.innerWidth >= 1024) {
                initLeftResizer(wrapper, formSection, divider, resultsSection);
                // Right resizer removed - no right sidebar in current layout
                // initRightResizer(wrapper, sidebarSection, rightDivider, resultsSection);
            }

            // Reinitialize resizer on window resize
            let resizeTimeout;
            window.addEventListener('resize', function () {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(function () {
                    if (window.innerWidth >= 1024) {
                        initLeftResizer(wrapper, formSection, divider, resultsSection);
                    } else {
                        // Reset to default grid on mobile
                        wrapper.style.gridTemplateColumns = '1fr';
                        formSection.style.width = '';
                        resultsSection.style.width = '';
                    }
                }, 250);
            });
        });

        function initLeftResizer(wrapper, formSection, divider, resultsSection) {
            let isResizing = false;
            let startX = 0;
            let startWidth = 0;
            const minWidth = 300;
            const maxWidth = 800;

            divider.addEventListener('mousedown', function (e) {
                isResizing = true;
                startX = e.clientX;
                startWidth = formSection.offsetWidth;
                divider.classList.add('dragging');
                document.body.style.cursor = 'col-resize';
                document.body.style.userSelect = 'none';
                e.preventDefault();
            });

            document.addEventListener('mousemove', function (e) {
                if (!isResizing) return;

                const deltaX = e.clientX - startX;
                let newWidth = startWidth + deltaX;

                // Constrain width
                newWidth = Math.max(minWidth, Math.min(maxWidth, newWidth));

                // Update grid template
                wrapper.style.gridTemplateColumns = `${newWidth}px 4px 1fr`;

                // Save to localStorage
                localStorage.setItem('ai-tools-form-width', newWidth);
            });

            document.addEventListener('mouseup', function () {
                if (isResizing) {
                    isResizing = false;
                    divider.classList.remove('dragging');
                    document.body.style.cursor = '';
                    document.body.style.userSelect = '';
                }
            });

            // Load saved width from localStorage
            const savedWidth = localStorage.getItem('ai-tools-form-width');
            if (savedWidth && window.innerWidth >= 1024) {
                const width = parseInt(savedWidth);
                if (width >= minWidth && width <= maxWidth) {
                    wrapper.style.gridTemplateColumns = `${width}px 4px 1fr`;
                }
            }
        }

        function initRightResizer(wrapper, sidebarSection, rightDivider, resultsSection) {
            // Right resizer functionality (currently placeholder)
            // This can be implemented similarly to initLeftResizer if needed
            // For now, we'll just make it a no-op to prevent the error
            console.log('Right resizer initialized (placeholder)');
        }
    </script>
</body>

<style>
    /* Override main-content width for AI Tools section */
    .section-ai-tools .main-content {
        max-width: 95%;
        width: 100%;
        padding: 30px 20px;
    }

    @media (min-width: 1400px) {
        .section-ai-tools .main-content {
            max-width: 90%;
        }
    }

    @media (min-width: 1920px) {
        .section-ai-tools .main-content {
            max-width: 85%;
        }
    }

    body.section-ai-tools main {
        display: block;
        margin: 120px auto 0 auto;
        width: auto;
        max-width: 95%;
        padding: 0 2rem;
    }

    body.section-ai-tools .container {
        max-width: none;
        width: auto;
    }

    body.section-ai-tools .post {
        max-width: none;
        width: auto;
    }

    /* Post Navigation - matching other sections */
    .post-navigation {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .post-navigation .nav-link {
        display: flex;
        flex-direction: column;
        padding: 1rem;
        background: var(--card-bg, rgba(255, 255, 255, 0.05));
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .post-navigation .nav-link:hover {
        background: var(--card-bg-hover, rgba(255, 255, 255, 0.08));
        border-color: var(--accent, #ff6b35);
        transform: translateY(-2px);
    }

    .post-navigation .nav-link.prev {
        text-align: left;
    }

    .post-navigation .nav-link.next {
        text-align: right;
        grid-column: 2;
    }

    .post-navigation .nav-label {
        font-size: 0.85em;
        color: rgba(255, 255, 255, 0.6);
        margin-bottom: 0.5rem;
    }

    .post-navigation .nav-title {
        color: var(--accent-light, #fff);
        font-weight: 600;
    }

    /* Responsive adjustments for navigation */
    @media (max-width: 768px) {
        .post-navigation {
            grid-template-columns: 1fr;
        }

        .post-navigation .nav-link.next {
            grid-column: 1;
        }
    }
</style>


</html>