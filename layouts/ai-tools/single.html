{{/* 
    AI Tools Single Page Template
    Native 3-column layout with JS to relocate result elements
    
    Frontmatter params used:
    - result_title: Title shown in result header
    - loading_text: Loading message
    - show_svg_download: Show SVG download button
    - show_pdf_download: Show PDF download button
    - tool_script: Custom JS filename (auto-detected if not specified)
    - pageScript: Legacy param for additional scripts
    - toggles_columns: Number of columns for toggle groups (default: 1)
*/}}
<!DOCTYPE html>
<html lang="{{ .Site.Language }}">

<head>
    {{ partial "head.html" . }}
</head>

<body class="section-{{ lower .Section }}{{ if eq (.Params.toggles_columns | default 1) 2 }} toggles-two-columns{{ end }}">
    <div class="container">
        {{ partial "header.html" . }}

        <div class="content">
            <main class="main-content">
                <!-- AI Tools 3-Column Layout -->
                <div class="ai-tools-layout">
                    <!-- Left: Form Section (renders markdown content) -->
                    <div class="ai-form-section">
                        {{ .Content }}
                    </div>

                    <!-- Resizable Divider -->
                    <div class="layout-divider" title="Drag to resize" aria-label="Drag to resize panels"></div>

                    <!-- Right: Results Section -->
                    <div class="ai-results-section">
                        {{/* Include result partial - JS will skip if custom resultDiv exists */}}
                        {{ partial "ai-tools/result-section.html" . }}
                    </div>
                </div>

                <!-- Navigation to Previous/Next AI Tools -->
                <nav class="post-navigation" aria-label="AI Tools Navigation">
                    {{ with .NextInSection }}
                    <a href="{{ .Permalink }}" class="nav-link prev">
                        <span class="nav-label">← Previous</span>
                        <span class="nav-title">{{ .Title }}</span>
                    </a>
                    {{ end }}

                    {{ with .PrevInSection }}
                    <a href="{{ .Permalink }}" class="nav-link next">
                        <span class="nav-label">Next →</span>
                        <span class="nav-title">{{ .Title }}</span>
                    </a>
                    {{ end }}
                </nav>

                {{ if .Params.pageScript }}
                <script src="{{ .Site.BaseURL }}{{ .Params.pageScript }}" defer></script>
                {{ end }}
            </main>
        </div>
    </div>

    {{ partial "footer.html" . }}
    {{ partial "javascript.html" . }}
    
    <!-- AI Tools Scripts (panel resizer + tool-specific JS) -->
    {{ partial "ai-tools/scripts.html" . }}
    
    <!-- Relocate result elements from form section to results section -->
    <script>
    (function() {
        const formSection = document.querySelector('.ai-form-section');
        const resultsSection = document.querySelector('.ai-results-section');
        if (!formSection || !resultsSection) return;
        
        // Find result-related elements in form section (legacy pages have them there)
        const elementsToMove = formSection.querySelectorAll('#loadingDiv, #errorDiv, #resultDiv, #progressDiv, .loading-container, .error-container, .result-container');
        
        if (elementsToMove.length > 0) {
            // Remove the template-injected partial elements (we'll use the custom ones)
            const partialElements = resultsSection.querySelectorAll('#loadingDiv, #errorDiv, #resultDiv');
            partialElements.forEach(el => el.remove());
            
            // Move custom elements to results section
            elementsToMove.forEach(el => {
                resultsSection.appendChild(el);
            });
        }
    })();
    </script>
</body>

</html>